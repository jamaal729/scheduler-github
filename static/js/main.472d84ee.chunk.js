(this.webpackJsonpscheduler=this.webpackJsonpscheduler||[]).push([[0],{22:function(e,t,n){e.exports=n(50)},27:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){},5:function(e,t,n){},50:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(19),c=n.n(i),s=(n(27),n(28),n(6)),o=n.n(s);n(29);function l(e){var t=o()("day-list__item",{"day-list__item--selected":e.selected,"day-list__item--full":0===e.spots});return r.a.createElement("li",{className:t,"data-testid":"day",onClick:function(){return e.setDay&&e.setDay(e.name)},selected:e.selected},r.a.createElement("h2",{className:"text--regular"},e.name),r.a.createElement("h3",{className:"text--light"},0===e.spots?"no spots remaining":1===e.spots?"1 spot remaining":"".concat(e.spots," spots remaining")," "))}function m(e){var t=e.days.map((function(t){return r.a.createElement(l,{key:t.id,name:t.name,spots:e.updateSpots(e.appointments,e.days,t),selected:t.name===e.day,setDay:function(){return e.setDay(t.name)}})}));return r.a.createElement("ul",null,t)}n(5);function u(e){return r.a.createElement("header",{className:"appointment__time"},r.a.createElement("h4",{className:"text--semi-bold"},e.time),r.a.createElement("hr",{className:"appointment__separator"}))}function p(e){return r.a.createElement("main",{className:"appointment__add"},r.a.createElement("img",{className:"appointment__add-button",src:"images/add.png",alt:"Add",onClick:e.onAdd}))}function d(e){return r.a.createElement("main",{className:"appointment__card appointment__card--show"},r.a.createElement("section",{className:"appointment__card-left"},r.a.createElement("h2",{className:"text--regular"},e.student),r.a.createElement("section",{className:"interviewer"},r.a.createElement("h4",{className:"text--light"},"Interviewer"),r.a.createElement("h3",{className:"text--regular"},e.interviewer.name))),r.a.createElement("section",{className:"appointment__card-right"},r.a.createElement("section",{className:"appointment__actions"},r.a.createElement("img",{className:"appointment__actions-button",src:"images/edit.png",alt:"Edit",onClick:e.onEdit}),r.a.createElement("img",{className:"appointment__actions-button",src:"images/trash.png",alt:"Delete",onClick:e.onDelete}))))}n(30);function E(e){var t=o()("button",{"button--confirm":e.confirm,"button--danger":e.danger});return r.a.createElement("button",{className:t,onClick:e.onClick,disabled:e.disabled},e.children)}function v(e){return r.a.createElement("main",{className:"appointment__card appointment__card--confirm"},r.a.createElement("h1",{className:"text--semi-bold"},e.message),r.a.createElement("section",{className:"appointment__actions"},r.a.createElement(E,{onClick:e.onCancel,danger:!0},"Cancel"),r.a.createElement(E,{onClick:e.onConfirm,danger:!0},"Confirm")))}var _=n(3);n(31);function f(e){var t=o()("interviewers__item",{"interviewers__item--selected":e.selected}),n=o()("interviewers__item-image",{"interviewers__item--selected-image":e.selected&&e.image});return r.a.createElement("li",{className:t,onClick:e.setInterviewer},r.a.createElement("img",{className:n,src:e.avatar,alt:e.name}),e.selected&&e.name)}n(32);function b(e){var t=e.interviewers.map((function(t){return r.a.createElement(f,{key:t.id,name:t.name,avatar:t.avatar,selected:t.id===e.interviewer,setInterviewer:function(){return e.setInterviewer&&e.setInterviewer(t.id)}})}));return r.a.createElement("section",{className:"interviewers"},r.a.createElement("h4",{className:"interviewers__header"},"Interviewer"),r.a.createElement("ul",{className:"interviewers__list"},t))}function g(e){var t=Object(a.useState)(e.student||""),n=Object(_.a)(t,2),i=n[0],c=n[1],s=Object(a.useState)(e.interviewer||null),o=Object(_.a)(s,2),l=o[0],m=o[1],u=Object(a.useState)(""),p=Object(_.a)(u,2),d=p[0],v=p[1];return r.a.createElement("main",{className:"appointment__card appointment__card--create"},r.a.createElement("section",{className:"appointment__card-left"},r.a.createElement("form",{autoComplete:"off",onSubmit:function(e){return e.preventDefault()}},r.a.createElement("input",{className:"appointment__create-input text--semi-bold",name:"name",type:"text",placeholder:"Enter Student Name",value:i,onChange:function(e){return c(e.target.value)},"data-testid":"student-name-input"}),r.a.createElement("section",{className:"appointment__validation"},d),r.a.createElement(b,{interviewers:e.interviewers,interviewer:l,setInterviewer:m}))),r.a.createElement("section",{className:"appointment__card-right"},r.a.createElement("section",{className:"appointment__actions"},r.a.createElement(E,{danger:!0,onClick:function(){c(""),m(null),e.onCancel()}},"Cancel"),r.a.createElement(E,{confirm:!0,onClick:function(){""!==i?null!==l?(v(""),e.onSave(i,l)):v("Please select an interviewer"):v("Student name cannot be blank")}},"Save"))))}function w(e){return r.a.createElement("main",{className:"appointment__card appointment__card--status"},r.a.createElement("img",{className:"appointment__status-image",src:"images/status.png",alt:"Loading"}),r.a.createElement("h1",{className:"text--semi-bold"},e.message))}function h(e){return r.a.createElement("main",{className:"appointment__card appointment__card--error"},r.a.createElement("section",{className:"appointment__error-message"},r.a.createElement("h1",{className:"text--semi-bold"},"Error"),r.a.createElement("h3",{className:"text--light"},e.message)),r.a.createElement("img",{className:"appointment__error-close",src:"images/close.png",alt:"Close",onClick:e.onClose}))}function N(e){var t=function(e){var t=Object(a.useState)(e),n=Object(_.a)(t,2),r=n[0],i=n[1],c=Object(a.useState)([e]),s=Object(_.a)(c,2),o=s[0],l=s[1];return{mode:r,transition:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];i(e),t&&o.pop(),o.push(e)},back:function(){if(o.length>1){var e=o;e.pop(),l(e),i(e[e.length-1])}}}}(e.interview?"SHOW":"EMPTY"),n=t.mode,i=t.transition,c=t.back;function s(t,n){var a={student:t,interviewer:n};console.log(t,n),i("SAVING",!0),e.bookInterview(e.id,a).then((function(){return i("SHOW")})).catch((function(e){return i("ERROR_SAVE",!0)}))}return r.a.createElement("article",{className:"appointment","data-testid":"appointment"},r.a.createElement(u,{time:e.time}),"EMPTY"===n&&r.a.createElement(p,{onAdd:function(){return i("CREATE")}}),"SHOW"===n&&r.a.createElement(d,{student:e.interview.student,interviewer:e.interview.interviewer,onEdit:function(){i("EDIT")},onDelete:function(){i("CONFIRM")}}),"CREATE"===n&&r.a.createElement(g,{interviewers:e.interviewers,interviewer:"",student:"",onSave:function(e,t){return s(e,t)},onCancel:function(){return c()}}),"EDIT"===n&&r.a.createElement(g,{interviewers:e.interviewers,interviewer:e.interview.interviewer.id,student:e.interview.student,onSave:function(e,t){return s(e,t)},onCancel:function(){return c()}}),"SAVING"===n&&r.a.createElement(w,{message:"Saving"}),"DELETING"===n&&r.a.createElement(w,{message:"Deleting"}),"CONFIRM"===n&&r.a.createElement(v,{message:"Confirm delete?",onConfirm:function(){return i("DELETING",!0),void e.cancelInterview(e.id).then((function(){return i("EMPTY")})).catch((function(e){return i("ERROR_DELETE",!0)}))},onCancel:function(){return c()}}),"ERROR_SAVE"===n&&r.a.createElement(h,{message:"Error saving appointment",onClose:function(){return c()}}),"ERROR_DELETE"===n&&r.a.createElement(h,{message:"Error deleting appointment",onClose:function(){return c()}}))}var O=n(21),S=n(9),y=n(1),C=n(4),T=n.n(C);function j(e,t){switch(t.type){case"SET_DAY":return Object(y.a)(Object(y.a)({},e),{},{day:t.value});case"SET_APPLICATION_DATA":return Object(y.a)(Object(y.a)({},e),{},{days:t.value[0].data,appointments:t.value[1].data,interviewers:t.value[2].data});case"SET_INTERVIEW":return Object(y.a)(Object(y.a)({},e),{},{appointments:t.value});default:throw new Error("Tried to reduce with unsupported action type: ".concat(t.type))}}var I=n(20);function D(e){var t=function(){var e=Object(a.useReducer)(j,{day:"Monday",days:[]}),t=Object(_.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){Promise.all([Promise.resolve(T.a.get("/api/days")),Promise.resolve(T.a.get("/api/appointments")),Promise.resolve(T.a.get("/api/interviewers"))]).then((function(e){r({type:"SET_APPLICATION_DATA",value:e})}))}),[]),{state:n,setDay:function(e){return r({type:"SET_DAY",value:e})},bookInterview:function(e,t){var a=Object(y.a)(Object(y.a)({},n.appointments[e]),{},{interview:Object(y.a)({},t)}),i=Object(y.a)(Object(y.a)({},n.appointments),{},Object(S.a)({},e,a));return T.a.put("http://localhost:8001/api/appointments/".concat(e),{interview:t}).then((function(){r({type:"SET_INTERVIEW",value:i})}))},cancelInterview:function(e){var t=Object(y.a)(Object(y.a)({},n.appointments[e]),{},{interview:null}),a=Object(y.a)(Object(y.a)({},n.appointments),{},Object(S.a)({},e,t));return T.a.delete("http://localhost:8001/api/appointments/".concat(e)).then((function(){r({type:"SET_INTERVIEW",value:a})}))},updateSpots:function(e,t,n){var a=t.find((function(e){return e.name===n.name})),r=Object(O.a)(a.appointments);return r.length-Object.values(Object(y.a)({},e)).reduce((function(e,t){return r.includes(t.id)&&t.interview&&e++,e}),0)}}}(),n=t.state,i=t.setDay,c=t.bookInterview,s=t.cancelInterview,o=t.updateSpots,l=function(e,t){var n=[];e.days.filter((function(e){e.name===t&&(n=e.appointments)}));var a=[];return n.forEach((function(t){a.push(e.appointments[t.toString()])})),a}(n,n.day),u=function(e,t){var n=null,a=[],r=[];if(e.days.map((function(e){e.name===t&&(n=e.name,a=e.interviewers||[])})),null!==n){var i,c=Object(I.a)(a);try{for(c.s();!(i=c.n()).done;){var s=i.value;r.push(e.interviewers[s])}}catch(o){c.e(o)}finally{c.f()}}return r}(n,n.day),p=l.map((function(e){var t=function(e,t){if(null===t)return null;var n=Object(y.a)({},t);return n.interviewer=e.interviewers[n.interviewer],n}(n,e.interview);return r.a.createElement(N,Object.assign({},e,{key:e.id,id:e.id,time:e.time,interview:t,interviewers:u,bookInterview:c,cancelInterview:s}))}));return r.a.createElement("main",{className:"layout"},r.a.createElement("section",{className:"sidebar"},r.a.createElement("img",{className:"sidebar--centered",src:"images/logo.png",alt:"Interview Scheduler"}),r.a.createElement("hr",{className:"sidebar__separator sidebar--centered"}),r.a.createElement("nav",{className:"sidebar__menu"},r.a.createElement(m,{days:n.days,day:n.day,setDay:i,appointments:n.appointments,updateSpots:o})),r.a.createElement("img",{className:"sidebar__lhl sidebar--centered",src:"images/lhl.png",alt:"Lighthouse Labs"})),r.a.createElement("section",{className:"schedule"},p,r.a.createElement(N,{key:"last",time:"5pm"})))}Object({NODE_ENV:"production",PUBLIC_URL:"/scheduler-github",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_API_BASE_URL&&(T.a.defaults.baseURL=Object({NODE_ENV:"production",PUBLIC_URL:"/scheduler-github",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_API_BASE_URL),T.a.defaults.baseURL="https://scheduler-api-j729.up.railway.app/",c.a.render(r.a.createElement(D,null),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.472d84ee.chunk.js.map